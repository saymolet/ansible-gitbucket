---
- hosts: db_servers
  roles:
  - database
  vars_prompt:
    - name: mysql_root_password
      prompt: "Enter your MySQL root password"
      private: yes
    - name: mysql_gitbucket_password
      prompt: "Enter your MySQL gitdbuser password"
      private: yes      

- hosts: nfs_servers
  roles:
  - nfs

- hosts: workers
  roles:
  - gitbucket_worker
  vars:
    mysql_server: "{{ hostvars['db_servers'].ansible_host }}"
    nfs_server: "{{ hostvars['nfs_servers'].ansible_host }}"
